"use client";
import { motion, useScroll, useSpring, useTransform } from "framer-motion";
import { useRef } from "react";
import ContentBox1 from "./ContentBox1";

function SvgDraw() {
  const frameRef = useRef(null);

  const { scrollYProgress: frameScroll } = useScroll({
    target: frameRef,
    offset: ["start", "end"],
  });

  const springScroll = useSpring(frameScroll, { bounce: 0.2 });

  const transformedScrollYProgress = useTransform(springScroll, [0, 1], [0, 2]);
  const adjustedScrollYProgress = useTransform(
    transformedScrollYProgress,
    (value) => value - 100
  );

  return (
    <>
      <div className="relative m-0 h-[50vh] items-center justify-center overflow-clip bg-[#223C32] ">
        <div className="absolute left-0 top-0 flex h-full w-full flex-col items-center  justify-center overflow-hidden text-center">
          <svg
            className="mt-6 inline-block h-12 w-12 animate-bounce"
            viewBox="0 0 35 47"
            fill="#09201C"
          >
            <path d="M33.5 29.1667C33.5 33.4101 31.8143 37.4798 28.8137 40.4804C25.8131 43.4809 21.7435 45.1667 17.5 45.1667C13.2565 45.1667 9.18687 43.4809 6.18629 40.4804C3.18571 37.4798 1.5 33.4101 1.5 29.1667C1.5 24.6378 3.37039 17.5842 6.45799 11.6535C7.99494 8.70131 9.78886 6.11582 11.7209 4.28871C13.66 2.45504 15.6105 1.5 17.5 1.5C19.3895 1.5 21.34 2.45504 23.279 4.28871C25.2111 6.11582 27.0051 8.70131 28.542 11.6535C31.6296 17.5842 33.5 24.6378 33.5 29.1667Z" />
          </svg>

          <svg
            className="inline-block h-full w-auto"
            viewBox="0 0 193 609"
            fill="none"
            preserveAspectRatio="xMidYMax meet"
          >
            <path
              d="M97 109V609M25.5 37C25.5 37 96.5 118.5 168 37M2 47C2 47 96.1684 154.81 191 47"
              stroke="#09201C"
              stroke-width="6"
            />
          </svg>
        </div>
      </div>
      <div
        ref={frameRef}
        className="relative m-0 h-[200vh] items-center justify-center overflow-clip bg-[#223C32]"
      >
        <motion.svg
          preserveAspectRatio="xMidYMax meet"
          className="sticky  top-[50%] mx-auto inline-block h-screen w-screen -translate-y-[50%] px-8"
          viewBox="0 0 1288 750"
          fill="none"
        >
          <motion.path
            d="M1232 247.5H643.5H56C56 247.5 56 301.5 2 301.5V694.5C2 694.5 56 694.5 56 748.5H643.5H1232C1232 694.5 1286 694.5 1286 694.5V301.5C1232 301.5 1232 247.5 1232 247.5Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <path d="M644 0.5V246" stroke="#09201C" stroke-width="3" />
          <motion.path
            d="M29 325C78.5 325 78.5 275.5 78.5 275.5H580C580 325 629.5 325 629.5 325V666.5C580 666.5 580 716 580 716H78.5C78.5 666.5 29 666.5 29 666.5V325Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M671.178 277.151L671.181 277.15C672.846 276.961 674.532 277.111 676.138 277.591C677.742 278.072 679.233 278.872 680.521 279.944C680.81 280.185 681.091 280.442 681.363 280.713L688.257 287.608C688.759 288.11 689.041 288.791 689.041 289.502C689.041 290.212 688.759 290.893 688.257 291.396L681.363 298.29C676.509 303.144 668.64 303.144 663.786 298.29L663.784 298.288C662.151 296.66 661.013 294.616 660.484 292.394L661.518 292.394H674.544L674.544 292.394C675.311 292.394 676.047 292.089 676.589 291.547C677.132 291.005 677.437 290.269 677.437 289.502V289.501C677.437 288.734 677.132 287.999 676.589 287.456C676.047 286.914 675.311 286.609 674.544 286.609H674.544L661.518 286.609H660.485C661.015 284.387 662.153 282.343 663.785 280.714L663.788 280.712C665.774 278.718 668.381 277.462 671.178 277.151Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M616.441 277.151L616.438 277.15C614.773 276.961 613.087 277.111 611.482 277.591C609.877 278.072 608.386 278.872 607.099 279.944C606.81 280.185 606.528 280.442 606.257 280.713L599.363 287.608C598.86 288.11 598.578 288.791 598.578 289.502C598.578 290.212 598.86 290.893 599.363 291.396L606.257 298.29C611.111 303.144 618.98 303.144 623.834 298.29L623.835 298.288C625.469 296.66 626.606 294.616 627.136 292.394L626.102 292.394H613.076L613.075 292.394C612.308 292.394 611.573 292.089 611.03 291.547C610.488 291.005 610.183 290.269 610.183 289.502V289.501C610.183 288.734 610.488 287.999 611.03 287.456C611.573 286.914 612.308 286.609 613.075 286.609H613.076L626.102 286.609H627.135C626.604 284.387 625.467 282.343 623.835 280.714L623.832 280.712C621.845 278.718 619.238 277.462 616.441 277.151Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M660.5 292C660.5 296.376 658.762 300.573 655.667 303.667C652.573 306.762 648.376 308.5 644 308.5C639.624 308.5 635.427 306.762 632.333 303.667C629.238 300.573 627.5 296.376 627.5 292C627.5 287.333 629.426 280.071 632.604 273.967C634.187 270.928 636.034 268.264 638.026 266.38C640.025 264.49 642.042 263.5 644 263.5C645.958 263.5 647.975 264.49 649.974 266.38C651.966 268.264 653.813 270.928 655.396 273.967C658.574 280.071 660.5 287.333 660.5 292Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M671.755 707.046L671.759 707.046C673.423 707.235 675.109 707.085 676.715 706.605C678.32 706.125 679.811 705.325 681.098 704.253C681.387 704.012 681.669 703.754 681.94 703.483L688.834 696.589C689.336 696.087 689.619 695.405 689.618 694.695C689.619 693.985 689.336 693.303 688.834 692.801L681.94 685.907C677.086 681.053 669.217 681.053 664.363 685.907L664.361 685.908C662.728 687.536 661.591 689.58 661.061 691.802L662.095 691.802H675.121L675.121 691.802C675.888 691.802 676.624 692.107 677.166 692.65C677.709 693.192 678.014 693.928 678.014 694.695V694.695C678.014 695.462 677.709 696.198 677.166 696.74C676.624 697.283 675.888 697.588 675.121 697.588H675.121L662.095 697.588H661.062C661.593 699.81 662.73 701.853 664.362 703.482L664.365 703.485C666.351 705.478 668.959 706.734 671.755 707.046Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M617.018 707.046L617.015 707.046C615.35 707.235 613.664 707.085 612.059 706.605C610.454 706.125 608.963 705.325 607.676 704.253C607.387 704.012 607.105 703.754 606.834 703.483L599.94 696.589C599.438 696.087 599.155 695.405 599.155 694.695C599.155 693.985 599.438 693.303 599.94 692.801L606.834 685.907C611.688 681.053 619.557 681.053 624.411 685.907L624.412 685.908C626.046 687.536 627.183 689.58 627.713 691.802L626.679 691.802H613.653L613.652 691.802C612.885 691.802 612.15 692.107 611.607 692.65C611.065 693.192 610.76 693.928 610.76 694.695V694.695C610.76 695.462 611.065 696.198 611.607 696.74C612.15 697.283 612.885 697.588 613.652 697.588H613.653L626.679 697.588H627.712C627.181 699.81 626.044 701.853 624.412 703.482L624.409 703.485C622.422 705.478 619.815 706.734 617.018 707.046Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M661.077 692.197C661.077 687.821 659.339 683.624 656.244 680.529C653.15 677.435 648.953 675.697 644.577 675.697C640.201 675.697 636.004 677.435 632.91 680.529C629.816 683.624 628.077 687.821 628.077 692.197C628.077 696.863 630.004 704.125 633.182 710.23C634.764 713.269 636.612 715.933 638.604 717.817C640.602 719.707 642.619 720.697 644.577 720.697C646.536 720.697 648.552 719.707 650.551 717.817C652.543 715.933 654.39 713.269 655.973 710.23C659.151 704.125 661.077 696.863 661.077 692.197Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
          <motion.path
            d="M1259.5 324.5C1210 324.5 1210 275 1210 275H708.5C708.5 324.5 659 324.5 659 324.5V666C708.5 666 708.5 715.5 708.5 715.5H1210C1210 666 1259.5 666 1259.5 666V324.5Z"
            style={{ pathLength: transformedScrollYProgress }}
            strokeDasharray="0 1"
            strokeWidth={3}
            stroke={"#09201C"}
          />
        </motion.svg>
        <motion.div
          className="p-auto sticky mx-auto flex h-1/3 w-full justify-evenly"
          style={{ y: adjustedScrollYProgress }}
        >
          {/* First content box */}

          <ContentBox1 />

          {/* Second content box */}
          <div className="item-center inline-block w-[30%] justify-center p-4">
            <p>Second Content Box</p>
          </div>
        </motion.div>
      </div>
      <div className="h-[100vh] bg-eggWhite" />
    </>
  );
}

export default SvgDraw;
